var pe=Object.defineProperty,he=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var w=(t,i,d)=>i in t?pe(t,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[i]=d,I=(t,i)=>{for(var d in i||(i={}))be.call(i,d)&&w(t,d,i[d]);if(R)for(var d of R(i))Ce.call(i,d)&&w(t,d,i[d]);return t},D=(t,i)=>he(t,me(i));(function(t,i){typeof exports=="object"&&typeof module!="undefined"?module.exports=i(require("vue")):typeof define=="function"&&define.amd?define(["vue"],i):(t=typeof globalThis!="undefined"?globalThis:t||self,t["colorpicker-v3"]=i(t.Vue))})(this,function(t){"use strict";const i=typeof window!="undefined",d=[],g="@@clickContext";let V,T=0;i&&(document.addEventListener("mousedown",l=>V=l),document.addEventListener("mouseup",l=>{d.forEach(c=>c[g].documentHandler(l,V))}));function M(l,c,n){return function(p={},f={}){!n||!p.target||!f.target||l.contains(p.target)||l.contains(f.target)||l===p.target||(c.expression&&l[g].methodName&&n.context[l[g].methodName]?n.context[l[g].methodName]():l[g].bindingFn&&l[g].bindingFn())}}var H={mounted(l,c,n){d.push(l);const p=T++;l[g]={id:p,documentHandler:M(l,c,n),methodName:c.expression,bindingFn:c.value}},updated(l,c,n){l[g].documentHandler=M(l,c,n),l[g].methodName=c.expression,l[g].bindingFn=c.value},unmounted(l){let c=d.length;for(let n=0;n<c;n++)if(d[n][g].id===l[g].id){d.splice(n,1);break}delete l[g]}},ke="",L=(l,c)=>{const n=l.__vccOpts||l;for(const[p,f]of c)n[p]=f;return n};const N=l=>(t.pushScopeId("data-v-87d63fa8"),l=l(),t.popScopeId(),l),O={class:"panel-header"},j={class:"color-view-bg"},G={class:"panel-main"},U=N(()=>t.createElementVNode("h3",null,"\u4E3B\u9898\u989C\u8272",-1)),q={class:"theme-color"},J=["onMouseover","onClick"],K={class:"standard-color"},Q=["onMouseover","onClick"],W=N(()=>t.createElementVNode("h3",null,"\u6807\u51C6\u989C\u8272",-1)),X={class:"theme-color"},Y=["onMouseover","onClick"],Z=N(()=>t.createElementVNode("h3",null,"\u900F\u660E\u5EA6",-1)),ee=t.defineComponent({name:"colorPicker",directives:{clickoutside:H}}),te=t.defineComponent(D(I({},ee),{props:{hex:{type:[String,void 0]},modelValue:{type:String},rgba:{type:String},defaultColor:{type:String,default:"#000000"},btnStyle:{type:[Object]},opacity:{type:[Number,String],default(){return 1}},showOpacity:{type:Boolean,default(){return!0}},standardColor:{type:Array,default(){return["#c21401","#ff1e02","#ffc12a","#ffff3a","#90cf5b","#00af57","#00afee","#0071be","#00215f","#72349d"]}},themeColor:{type:Array,default(){return["#000000","#ffffff","#eeece1","#1e497b","#4e81bb","#e2534d","#9aba60","#8165a0","#47acc5","#f9974c"]}}},emits:["input","change","finish","update:hex","update:rgba","close","update:modelValue"],setup(l,{emit:c}){const n=l,p=t.ref(!1),f=t.ref(""),B=t.ref(null),h=t.ref(Number(n.opacity)),oe=t.ref(n.standardColor),v=t.reactive({visible:!1,html5Color:n.hex,tColor:n.themeColor,colorConfig:[["#7f7f7f","#f2f2f2"],["#0d0d0d","#808080"],["#1c1a10","#ddd8c3"],["#0e243d","#c6d9f0"],["#233f5e","#dae5f0"],["#632623","#f2dbdb"],["#4d602c","#eaf1de"],["#3f3150","#e6e0ec"],["#1e5867","#d9eef3"],["#99490f","#fee9da"]]}),b=t.ref(m(n.hex!==""&&n.hex?n.hex:n.defaultColor,h.value));n.rgba&&n.rgba.length&&(b.value=n.rgba),t.watch(f,()=>{f.value?b.value=f.value:b.value=C.value}),t.watch(()=>n.hex,(e,o)=>{(/^#?[0-9a-fA-F]{3}$/.test(e)||/^#?[0-9a-fA-F]{4}$/.test(e)||/^#?[0-9a-fA-F]{5}$/.test(e)||/^#?[0-9a-fA-F]{6}$/.test(e)||/^#?[0-9a-fA-F]{8}$/.test(e))&&e.trim().length<=9&&e.trim().length!=6&&e.trim().length!=8&&(C.value=m(e,1),b.value=m(e,1)),(e.length===0||e=="")&&(C.value="",b.value="")});function ne(e){let o;/^rgb\(/.test(e)?o="^[rR][gG][Bb][(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){2}[\\s]*(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)[\\s]*[)]{1}$":/^rgba\(/.test(e)&&(o="^[rR][gG][Bb][Aa][(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|1.0|0|0.[0-9])[\\s]*[)]{1}$");const a=new RegExp(o);return!!e.match(a)}t.watch(()=>n.rgba,(e,o)=>{ne(e)&&(b.value=e,C.value=e),(e.length===0||e=="")&&(C.value="",b.value="")});const y=t.ref(n.hex!==""&&n.hex?n.hex:n.defaultColor),C=t.ref(m(n.hex!==""&&n.hex?n.hex:n.defaultColor,h.value));n.rgba&&n.rgba.length&&(C.value=n.rgba);const le=t.computed(()=>{const e=[];for(let o of v.colorConfig)e.push(ie(o[1],o[0],5));return e}),re=e=>{if(e.length===4)e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else return e},S=e=>{e=re(e);const o=[];for(let a=1;a<7;a+=2)o.push(parseInt("0x"+e.slice(a,a+2)));return o};function F(e){if(/^#?[0-9a-fA-F]{3}$/.test(e)){let o=e.substring(e.length-1,e.length),a=e.substring(e.length-2,e.length-1),r=e.substring(e.length-3,e.length-2);return F(`${r+r}${a+a}${o+o}`)}if(/^#?[0-9a-fA-F]{4}$/.test(e)){let o=e.substring(e.length-1,e.length),a=e.substring(e.length-2,e.length-1),r=e.substring(e.length-3,e.length-2),u=e.substring(e.length-4,e.length-3);return F(`${u+u}${r+r}${a+a}${o+o}`)}if(/^#?[0-9a-fA-F]{6}$/.test(e)){let o=parseInt("0x"+e.substring(e.length-2,e.length)),a=parseInt("0x"+e.substring(e.length-4,e.length-2));return{r:parseInt("0x"+e.substring(e.length-6,e.length-4)),g:a,b:o,a:1}}if(/^#?[0-9a-fA-F]{8}$/.test(e)){let o=parseInt("0x"+e.substring(e.length-2,e.length));o=o/255;let a=parseInt("0x"+e.substring(e.length-4,e.length-2)),r=parseInt("0x"+e.substring(e.length-6,e.length-4));return{r:parseInt("0x"+e.substring(e.length-8,e.length-6)),g:r,b:a,a:o}}}function m(e,o){const{r:a,g:r,b:u,a:s}=F(e);let k=s;return s===1&&o===1?k=1:s!==1&&o===1?k=s:s===1&&o!==1&&(k=o),`rgba(${a},${r},${u},${k})`}const E=e=>{y.value=e,C.value=m(e,h.value),b.value=m(e,h.value),c("input",e),c("update:hex",e),c("update:rgba",m(e,h.value)),c("change",{hex:e,rgba:m(e,h.value)})},ae=(e,o,a)=>{const r=(e<<16|o<<8|a).toString(16);return"#"+new Array(Math.abs(r.length-7)).join("0")+r},ce=()=>{p.value=!p.value},ie=(e,o,a)=>{const r=S(e),u=S(o),s=(u[0]-r[0])/a,k=(u[1]-r[1])/a,x=(u[2]-r[2])/a,P=[];for(let $=0;$<a;$++)P.push(ae(parseInt(s*$+r[0]),parseInt(k*$+r[1]),parseInt(x*$+r[2])));return P},se=()=>{p.value=!1,c("close",{hex:y.value,rgba:m(y.value,h.value)})},A=e=>{f.value=m(e,h.value)},de=()=>{B.value.click()},ue=()=>{E(n.defaultColor)},z=e=>{E(B.value.value)},fe=()=>{E(y.value)},ge=()=>{p.value=!1,c("finish",{hex:y.value,rgba:m(y.value,h.value)})};return(e,o)=>{const a=t.resolveDirective("clickoutside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:"zs-color-picker",ref:"colorPicker",onClick:o[7]||(o[7]=r=>r.stopPropagation())},[t.createElementVNode("div",{class:"zs-color-picker-btn",style:t.normalizeStyle(I({},l.btnStyle)),onClick:ce},[t.createElementVNode("div",{class:"zs-color-picker-btn-color",style:t.normalizeStyle({backgroundColor:C.value})},null,4)],4),t.createElementVNode("div",{class:t.normalizeClass(["zs-color-picker-panel",p.value?"zs-color-picker-panel__visible":""])},[t.createElementVNode("div",O,[t.createElementVNode("div",j,[t.createElementVNode("div",{class:"color-view",style:t.normalizeStyle(`background-color: ${b.value}`)},null,4)]),t.createElementVNode("div",{class:"default-color",onMouseover:o[0]||(o[0]=r=>f.value=l.defaultColor),onMouseout:o[1]||(o[1]=r=>f.value=null),onClick:ue},"\u9ED8\u8BA4\u989C\u8272",32)]),t.createElementVNode("div",G,[U,t.createElementVNode("ul",q,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(v).tColor,(r,u)=>(t.openBlock(),t.createElementBlock("li",{key:u,style:t.normalizeStyle({backgroundColor:r}),onMouseover:s=>A(r),onMouseout:o[2]||(o[2]=s=>f.value=null),onClick:s=>E(r)},null,44,J))),128))]),t.createElementVNode("ul",K,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(le),(r,u)=>(t.openBlock(),t.createElementBlock("li",{key:u},[t.createElementVNode("ul",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r,(s,k)=>(t.openBlock(),t.createElementBlock("li",{key:k,style:t.normalizeStyle({backgroundColor:s}),onMouseover:x=>A(s),onMouseout:o[3]||(o[3]=x=>f.value=null),onClick:x=>E(s)},null,44,Q))),128))])]))),128))]),W,t.createElementVNode("ul",X,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(oe.value,(r,u)=>(t.openBlock(),t.createElementBlock("li",{key:u,style:t.normalizeStyle({backgroundColor:r}),onMouseover:s=>A(r),onMouseout:o[4]||(o[4]=s=>f.value=null),onClick:s=>E(r)},null,44,Y))),128))]),l.showOpacity?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[Z,t.withDirectives(t.createElementVNode("input",{type:"range",max:"1",min:"0",step:"0.0001","onUpdate:modelValue":o[5]||(o[5]=r=>h.value=r),class:"gradient",onInput:fe},null,544),[[t.vModelText,h.value]]),t.createTextVNode(" "+t.toDisplayString(h.value),1)],64)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"bottom-btn"},[t.createElementVNode("h3",{onClick:de,style:{cursor:"pointer"}},"\u66F4\u591A\u989C\u8272"),t.createElementVNode("div",{class:"finsh",onClick:ge},"\u5B8C\u6210")]),t.withDirectives(t.createElementVNode("input",{class:"color-input",type:"color",ref_key:"html5ColorRef",ref:B,"onUpdate:modelValue":o[6]||(o[6]=r=>t.unref(v).html5Color=r),onChange:z,onInput:z},null,544),[[t.vModelText,t.unref(v).html5Color]])])],2)])),[[a,se]])}}}));var _=L(te,[["__scopeId","data-v-87d63fa8"]]);return _.install=l=>l.component(_.name,_),typeof window!="undefined"&&window.Vue&&install(window.Vue),_});
